<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Gourmet Swipe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        overscroll-behavior-y: contain;
        background-color: #f3f4f6;
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.330.0?external=react",
        "clsx": "https://esm.sh/clsx@2.1.0",
        "framer-motion": "https://esm.sh/framer-motion@11.0.3?external=react,react-dom"
      }
    }
    </script>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="root"></div>
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Layers, Flame, X, RotateCcw, MapPin, Clock, ExternalLink, 
            RotateCw, AlertCircle, Phone, Map, Heart, Star, Ban, 
            ArrowUp, ArrowDown, Share2, Utensils 
        } from 'lucide-react';
        import { motion, useMotionValue, useTransform, useAnimation, AnimatePresence } from 'framer-motion';
        import clsx from 'clsx';

        // --- Types & Constants ---
        const RestaurantType = {
            Buffet: 'è‡ªåŠ©é¤ (Buffet)',
            Set: 'å¥—é¤/åŠè‡ªåŠ© (Set/Semi-Buffet)',
        };
          
        const InteractionStatus = {
            None: 'none',
            Like: 'like',
            Dislike: 'dislike',
            SuperLike: 'superlike',
            Block: 'block',
        };

        // --- Data Service ---
        const IMG_PREMIUM = 'https://static.vecteezy.com/system/resources/thumbnails/059/967/334/small_2x/exquisite-seafood-buffet-a-culinary-masterpiece-of-shrimp-oysters-and-fresh-delights-on-ice-for-a-luxurious-dining-experience-free-photo.jpeg';
        const IMG_STEAK = 'https://img.freepik.com/free-photo/vertical-closeup-shot-freshly-grilled-t-bone-steak-glass-wine-background_181624-36456.jpg';
        const IMG_JAPANESE = 'https://media.istockphoto.com/id/844952022/photo/kaiseki-cuisine.jpg?s=612x612&w=is&k=20&c=clm_o70u4nfi1TU73aEnrIJQRLVBqSf40SIFX5reCk0=';
        const IMG_CHINESE = 'https://cookmorphosis.com/wp-content/uploads/2022/09/vertical-roasted-duck-cantonese-style-1.jpg';
        const IMG_VIEW = 'https://images.unsplash.com/photo-1565557623262-b51c2513a641?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
        const IMG_CASUAL = 'https://images.unsplash.com/photo-1555244162-803834f70033?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';

        const RESTAURANT_DATA = [
          {
            id: '2.1',
            name: 'å°åŒ—å‡±æ’’å¤§é£¯åº—ï½œCheckers',
            type: RestaurantType.Buffet,
            price: 599,
            priceDisplay: '$599 èµ·',
            location: 'å°åŒ—è»Šç«™',
            address: 'å°åŒ—å¸‚ä¸­æ­£å€å¿ å­è¥¿è·¯ä¸€æ®µ 38 è™Ÿ',
            sellingPoint: 'ä½æ–¼å°åŒ—è»Šç«™æ­£å°é¢ï¼Œæ“æœ‰ç„¡å¯å–ä»£çš„äº¤é€šä¾¿æ·æ€§ã€‚ä½æ–¼600å…ƒçš„è¦ªæ°‘åƒ¹æ ¼äº«é£¯åº—è‡ªåŠ©ç™¾åŒ¯ï¼Œé«˜CPå€¼èˆ‡é€šå‹¤ä¾¿åˆ©æ€§çš„é¦–é¸ã€‚',
            features: 'å¤šæ¨£åŒ–åœ¨åœ°åœ‹éš›é¢¨å‘³ç¾é£Ÿï¼ŒåŒ…å«ç¾©å¼æ–™ç†ã€å’Œç‰›åƒåˆ°é£½ã€è±å¯Œé®®è”¬æ²™æ‹‰å§åŠç²¾ç·»æ‰‹å·¥ç”œé»ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 14:30 - 16:30', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ä¸¦å‘ŠçŸ¥å°‡ä½¿ç”¨æ ¸éŠ·ç¢¼ã€‚ç‰¹æ®Šç¯€æ—¥ï¼ˆå¦‚è¾²æ›†æ˜¥ç¯€æœŸé–“ï¼‰ä½¿ç”¨éœ€è£œè¶³ç¾å ´åƒ¹å·®ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/24223-taipei-caesar-hotel-meal-coupons-checkers',
            image: IMG_CASUAL
          },
          {
            id: '2.2',
            name: 'æ—å£äºæ˜•ç¦æœ‹å–œä¾†ç™»é…’åº—ï½œå®œå®¢æ¨‚è¥¿é¤å»³',
            type: RestaurantType.Buffet,
            price: 799,
            priceDisplay: '$799 èµ·',
            location: 'æ—å£ä¸‰äº•',
            address: 'æ–°åŒ—å¸‚æ—å£å€æ–‡åŒ–ä¸‰è·¯ä¸€æ®µ 1 è™Ÿ',
            sellingPoint: 'é©åˆå‰å¾€æ—å£ä¸‰äº•Outleté€›è¡—æ—ç¾¤ã€‚ä»¥å¯¦æƒ åƒ¹æ ¼é«”é©—åœ‹éš›é€£é–å“ç‰Œå–œä¾†ç™»ç­‰ç´šé¤é£²ï¼Œæ€§åƒ¹æ¯”æ¥µé«˜ã€‚',
            features: 'é–‹æ”¾å¼å»šæˆ¿è¨­è¨ˆï¼Œæä¾›è±å¯Œä¸­è¥¿å¼å†·ç›¤èˆ‡ç†Ÿé£Ÿã€ç²¾å·§æ—¥å¼å°å“ï¼Œä»¥åŠå¤šæ¨£åŒ–ç”œé»èˆ‡æ°´æœã€‚',
            hours: ['å¹³æ—¥åˆé¤ 11:30 - 14:00', 'å‡æ—¥åˆé¤ 12:00 - 14:30', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚é¤åˆ¸å„ªæƒ æ•ˆæœŸè‡³2025å¹´12æœˆ31æ—¥ï¼Œé€¾æœŸéœ€è¾¦ç†é€€è²¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/124915',
            image: IMG_CASUAL
          },
          {
            id: '2.3',
            name: 'å°åŒ—å…­ç¦è¬æ€¡é…’åº—ï½œæ•˜æ—¥å…¨æ—¥é¤å»³',
            type: RestaurantType.Buffet,
            price: 799,
            priceDisplay: '$799 èµ·',
            location: 'å—æ¸¯è»Šç«™',
            address: 'å°åŒ—å¸‚å—æ¸¯å€å¿ å­æ±è·¯ä¸ƒæ®µ 359 è™Ÿ 7 æ¨“',
            sellingPoint: 'ä½æ–¼å—æ¸¯è»Šç«™æ­£ä¸Šæ–¹ï¼Œäº¤é€šæ¨ç´ä½ç½®ã€‚ä¸»æ‰“ã€Œå…¨å€æˆ¶å¤–èŠ±åœ’æ™¯è§€ã€ï¼Œåœ¨éƒ½å¸‚ä¸­äº«å—ç¶ æ„ç›ç„¶çš„ç’°å¢ƒã€‚',
            features: 'å¼·èª¿ã€Œå¸«å‚…ç¾å ´çƒ¹èª¿ã€ç¾é»ç¾åšã€ï¼Œæä¾›æœ€æ–°é®®çš„é£Ÿæèˆ‡ç²¾ç·»é¤é»ï¼Œæ¶µè“‹ç•°åœ‹ç‰¹è‰²æ–™ç†èˆ‡æµ·é®®ç™¾åŒ¯ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 14:30 - 16:30 (é€±äº”è‡³é€±æ—¥)', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€æ–¼ç”¨é¤3å¤©å‰äº‹å…ˆè‡´é›»è¨‚ä½ã€‚å„ªæƒ æ•ˆæœŸä¾æ–¹æ¡ˆè€Œç•°ï¼Œæœ€é•·è‡³2025å¹´12æœˆ30æ—¥ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/28828',
            image: IMG_CASUAL
          },
          {
            id: '2.4',
            name: 'å°åŒ—æ–°æ¿å¸Œçˆ¾é “é…’åº—ï½œæ‚…å¸‚é›†',
            type: RestaurantType.Buffet,
            price: 850,
            priceDisplay: '$850 èµ·',
            location: 'æ¿æ©‹',
            address: 'æ–°åŒ—å¸‚æ¿æ©‹å€æ°‘æ¬Šè·¯ 88 è™Ÿ',
            sellingPoint: 'æ¿æ©‹æŒ‡æ¨™æ€§äº”æ˜Ÿé£¯åº—ï¼Œã€Œå¹³æ—¥æ™šé¤ä¸åŠ åƒ¹ã€æ–¹æ¡ˆæ¥µå…·å¸å¼•åŠ›ï¼Œé©åˆä¸æƒ³è¢«åŠ åƒ¹çš„ä¸Šç­æ—æˆ–å®¶åº­èšé¤ã€‚',
            features: 'ç”±è¥¿ç­ç‰™ä¸»å»šåé®ï¼Œä¸»æ‰“é“åœ°åœ°ä¸­æµ·ç•°åœ‹æ–™ç†ï¼Œä¸¦æä¾›å®¢è£½åŒ–æµ·é®®æ–™ç†æœå‹™ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'å‡æ—¥ä½¿ç”¨éœ€åŠ åƒ¹300å…ƒã€‚éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚æ­¤å„ªæƒ ä¸è¨ˆå…¥å¸Œçˆ¾é “æ¦®è­½å®¢æœƒé»æ•¸ç´¯ç©ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23861-taipei-shinban-hilton-hotel-meal-voucher-yue-market-restaurant',
            image: IMG_CASUAL
          },
          {
            id: '2.5',
            name: 'å°åŒ—å–œä¾†ç™»å¤§é£¯åº—ï½œåäºŒå»š',
            type: RestaurantType.Buffet,
            price: 899,
            priceDisplay: '$899 èµ·',
            location: 'å–„å°å¯º',
            address: 'å°åŒ—å¸‚ä¸­æ­£å€å¿ å­æ±è·¯ä¸€æ®µ 12 è™Ÿ',
            sellingPoint: 'æŒ‘é«˜ä¸­åº­ç»ç’ƒå¤©å¹•è¨­è¨ˆï¼Œè‡ªç„¶æ¡å…‰ï¼Œã€Œ12åº§å…¨é–‹æ”¾å¼ç¾é£Ÿæ–™ç†å€ã€ï¼Œå¯¬æ•æ˜äº®ä¸”äº’å‹•æ€§åè¶³ã€‚',
            features: 'ç¾åˆ‡çˆçƒ¤ç‰›æ’ã€æµ·æ¸¯ç›´é€ç”ŸçŒ›æµ·é®®ã€é“åœ°å°åº¦é¢¨å‘³ä½³é¤šï¼Œä»¥åŠç„¡é™æš¢é£²çš„æ²æ¶¼ç”Ÿå•¤é…’ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 15:00 - 17:00', 'æ™šé¤ 18:00 - 21:00'],
            rules: 'æ‡‰äº‹å…ˆè¨‚ä½ä¸¦å‘ŠçŸ¥å°‡ä½¿ç”¨é›»å­ç¥¨åˆ¸ã€‚é¤åˆ¸å„ªæƒ æ•ˆæœŸè‡³2026å¹´10æœˆ31æ—¥ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/34984-sheraton-grand-taipei-hotel-kitchen-12-buffet-taiwan',
            image: IMG_PREMIUM
          },
          {
            id: '2.6',
            name: 'å°åŒ—å‡±é”å¤§é£¯åº—ï½œç™¾å®´è‡ªåŠ©é¤å»³',
            type: RestaurantType.Buffet,
            price: 960,
            priceDisplay: '$960 èµ·',
            location: 'è¬è¯è»Šç«™',
            address: 'å°åŒ—å¸‚è¬è¯å€è‰‹èˆºå¤§é“ 167 è™Ÿ',
            sellingPoint: 'è¥¿å€äº¤é€šæ¨ç´ï¼Œèˆ‡è¬è¯è»Šç«™å…±æ§‹ï¼Œæœ€é©åˆéœ€è¦æ­ä¹˜å°éµæˆ–æ·é‹ã€ä¸”åå¥½å¯¬æ•ç”¨é¤ç©ºé–“çš„åœ˜é«”ã€‚',
            features: 'æä¾›å¤šæ¨£åŒ–çš„ä¸­è¥¿å¼è‡ªåŠ©é¤é»ï¼Œçµåˆå‰µæ„å£å‘³èˆ‡æ–™ç†ç¾å­¸ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚ç‰¹æ®Šç¯€æ—¥ï¼ˆå¦‚è¾²æ›†æ˜¥ç¯€æœŸé–“ï¼‰ä½¿ç”¨éœ€è£œè¶³ç¾å ´åƒ¹å·®ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23787-11-discount-china-travel-card-applicable-wanhua-kaida-hotel-baiyan-buffet-restaurant-meal-coupon-taipei-taiwan',
            image: IMG_CASUAL
          },
          {
            id: '2.7',
            name: 'å°åŒ—èŒ¹æ›¦é…’åº—ï½œSUNNY BUFFET',
            type: RestaurantType.Buffet,
            price: 999,
            priceDisplay: '$999 èµ·',
            location: 'å°å·¨è›‹',
            address: 'å°åŒ—å¸‚æ¾å±±å€æ•¦åŒ–åŒ—è·¯ 100 è™Ÿ',
            sellingPoint: 'ç½•è¦‹52æŠ˜è¶…é«˜æŠ˜æ‰£ï¼Œåƒå…ƒä¸åˆ°äº«èƒèŸ¹ã€æµ·é®®ã€å•¤é…’ç„¡é™ä¾›æ‡‰ã€‚720åªå¯¬æ•ç©ºé–“èˆ‡æŒ‘é«˜å¤©äº•è‡ªç„¶æ¡å…‰ã€‚',
            features: 'ä¸»æ‰“ã€ŒèƒèŸ¹ã€æµ·é®®ã€å•¤é…’ã€ç‰›è‚‰ç„¡é™ä¾›æ‡‰ã€ï¼Œè¨­æœ‰äºæ´²æ–™ç†å€ã€ç¾é»ç¾çƒ¤ç‰›è‚‰å€ç­‰å¤šå€‹ç¾é£Ÿå€ã€‚',
            hours: ['æ—©é¤ 07:00 - 10:30', 'åˆé¤ 11:30 - 14:00', 'ä¸‹åˆé¤ 14:45 - 17:00', 'æ™šé¤ 18:00 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚å„ªæƒ æ•ˆæœŸç‚ºè³¼è²·æ—¥èµ·4å€‹æœˆã€‚è¾²æ›†æ˜¥ç¯€é™¤å¤•è‡³åˆäºŒç­‰ç‰¹å®šæ—¥æœŸä¸é©ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/34969-meal-coupons-at-ruxi-hotel-taipei-sunny-buffet',
            image: IMG_PREMIUM
          },
          {
            id: '2.8',
            name: 'Mega 50 é¤é£²åŠå®´æœƒï½œ50æ¨“ CafÃ©',
            type: RestaurantType.Buffet,
            price: 1099,
            priceDisplay: '$1,099 èµ·',
            location: 'æ¿æ©‹å¤§é ç™¾',
            address: 'æ–°åŒ—å¸‚æ¿æ©‹å€æ–°ç«™è·¯ 16 è™Ÿ',
            sellingPoint: 'ã€Œå…¨åœ‹æœ€é«˜çš„è‡ªåŠ©é¤å»³ã€ï¼Œ50æ¨“å±¤é«˜ï¼Œæä¾›ç„¡æ•µåŸå¸‚æ™¯è§€ï¼Œç‰¹åˆ¥é©åˆè¿½æ±‚ç¨ç‰¹é«”é©—æˆ–æ…¶ç¥ç‰¹æ®Šæ—¥å­ã€‚',
            features: 'ä»¥è±å¯Œçš„ã€Œæµ·é™¸ç™¾åŒ¯ã€èåï¼Œéš¨å­£ç¯€æ›´æ›ä¸åŒçš„æ–™ç†ä¸»é¡Œï¼Œç¢ºä¿æ¯æ¬¡åˆ°è¨ªéƒ½æœ‰é©šå–œã€‚',
            hours: ['å¹³æ—¥åˆé¤ 11:30 - 14:00', 'å¹³æ—¥æ™šé¤ 18:00 - 21:00', 'å‡æ—¥åˆé¤ 11:00-13:00 / 13:30-15:30', 'å‡æ—¥æ™šé¤ 17:00-19:00 / 19:30-21:30'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚è–èª•ç¯€ã€è·¨å¹´ã€è¾²æ›†æ˜¥ç¯€ã€æ¯è¦ªç¯€ç­‰ç‰¹å®šç¯€æ—¥ä¸é©ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/34953-mega-50-banqiao-far-east-cafe-meal-coupon-on-the-50th-floor-new-taipei-taiwan',
            image: IMG_VIEW
          },
          {
            id: '2.9',
            name: 'JR æ±æ—¥æœ¬å¤§é£¯åº—å°åŒ—ï½œé‰‘éº—å®‰',
            type: RestaurantType.Buffet,
            price: 1350,
            priceDisplay: '$1,350 èµ·',
            location: 'å—äº¬å¾©èˆˆ',
            address: 'å°åŒ—å¸‚ä¸­å±±å€å—äº¬æ±è·¯ä¸‰æ®µ 133 è™Ÿ',
            sellingPoint: 'æ—¥ç±ä¸»å»šåé®ï¼Œæä¾›ç²¾ç·»æ—¥æœ¬æ±åŒ—æ–™ç†ï¼Œå¸å¼•æ—¥æ–™æ„›å¥½è€…çš„ç¨ç‰¹é¸æ“‡ã€‚',
            features: 'çµåˆæ—¥å¼èˆ‡è¥¿å¼ç²¾é«“ï¼Œæä¾›èƒèŸ¹ã€ç”Ÿé­šç‰‡ã€ç¾ç…ç‰›æ’ï¼Œç‰¹è‰²èœå¦‚ç§‹ç”°ç±³æ£’é‹ã€é®­é­šè¦ªå­ä¸¼ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'æ™šé¤ 18:00 - 21:30'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚å…ƒæ—¦ã€æ˜¥ç¯€ã€228ç­‰åœ‹å®šé€£çºŒå‡æœŸä¸é©ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/130442',
            image: IMG_JAPANESE
          },
          {
            id: '2.10',
            name: 'å°åŒ—é æ±é¦™æ ¼é‡Œæ‹‰ï½œé æ± CAFÃ‰',
            type: RestaurantType.Buffet,
            price: 1550,
            priceDisplay: '$1,550 èµ·',
            location: 'æ•¦åŒ–å—è·¯',
            address: 'å°åŒ—å¸‚æ•¦åŒ–å—è·¯äºŒæ®µ 201 è™Ÿ',
            sellingPoint: 'å¥¢è¯Buffetä»£è¡¨ï¼Œ12å¤§ä¸»é¡Œé¤æª¯æ¥µè‡´è±å¯Œï¼Œé¼æ³°è±è¯åç­‰ç¨å®¶äº®é»ï¼Œé©åˆé ç®—å……è¶³çš„ç¾é£Ÿå®¶ã€‚',
            features: 'ç¨å®¶äº®é»åŒ…æ‹¬è¥¿ç­ç‰™çƒ¤çˆç¾çƒ¤ç‚­çƒ¤è‚‰å“ï¼Œä»¥åŠèˆ‡çŸ¥åå“ç‰Œã€Œé¼æ³°è±ã€çš„è¯åé¤é»ã€‚',
            hours: ['åˆé¤ 11:45 - 14:00', 'ä¸‹åˆèŒ¶ 15:00 - 17:00 (é€±ä¸€äºŒå…¬ä¼‘)', 'æ™šé¤ 18:00 - 21:30'],
            rules: 'æ‡‰äº‹å…ˆè¨‚ä½ã€‚æ•ˆæœŸè‡³2026/6/30ã€‚ä¸é©ç”¨æ–¼ç‰¹å®šæ—¥æœŸï¼Œè©³æƒ…ä¾å®˜æ–¹é é¢ç‚ºæº–ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23507-far-eastern-shangri-la-taipei-cafe-buffet-taiwan',
            image: IMG_PREMIUM
          },
          {
            id: '2.11',
            name: 'å°åŒ—è€çˆºé…’åº—ï½œLe CafÃ© å’–å•¡å»³',
            type: RestaurantType.Buffet,
            price: 1599,
            priceDisplay: '$1,599 èµ·',
            location: 'ä¸­å±±åŒ—è·¯',
            address: 'å°åŒ—å¸‚ä¸­å±±åŒ—è·¯äºŒæ®µ 37 ä¹‹ 1 è™Ÿ',
            sellingPoint: 'å°åŒ—å¸‚ã€Œè€å­—è™Ÿè‡ªåŠ©é¤å»³ã€ï¼Œç¶“å…¸åœ°ä½ã€å„ªé›…ç’°å¢ƒèˆ‡ç´°è†©æœå‹™ï¼Œè¿½æ±‚ç©©å®šé«˜å“è³ªé«”é©—çš„é¸æ“‡ã€‚',
            features: 'ç²¾ç·»ç¾å‘³çš„ç„¡åœ‹ç•Œè‡ªåŠ©æ–™ç†ï¼Œæ¯é“èœé¤šå±•ç¾é«˜æª”å“è³ªï¼Œã€Œæ‹›ç‰Œç”œé»ã€æ›´æ˜¯å¿…åšç¶“å…¸ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 14:30 - 16:30', 'æ™šé¤ 18:00 - 21:30'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚ç‰¹æ®Šç¯€æ—¥ï¼ˆå¦‚è·¨å¹´ã€è¾²æ›†æ˜¥ç¯€ã€æ¯è¦ªç¯€ç­‰ï¼‰ä½¿ç”¨éœ€è£œè¶³ç¾å ´åƒ¹å·®ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/34785',
            image: IMG_VIEW
          },
          {
            id: '2.12',
            name: 'å°åŒ—å¯’èˆè‰¾ç¾é…’åº—ï½œæ¢ç´¢å»šæˆ¿',
            type: RestaurantType.Buffet,
            price: 9999, 
            priceDisplay: 'å·²å”®ç½„',
            location: 'ä¿¡ç¾©å€',
            address: 'å°åŒ—å¸‚ä¿¡ç¾©å€æ¾ä»è·¯ 38 è™Ÿ',
            sellingPoint: 'ä¿¡ç¾©å€è¶…äººæ°£é¤å»³ï¼Œã€Œå‰µæ–°è‡ªåŠ©é¤æª¯åŠå–®é»å…¼å…·ã€çš„ç¨ç‰¹ç”¨é¤æ–¹å¼ï¼Œæä¾›ç²¾ç·»å®¢è£½åŒ–æœå‹™ã€‚',
            features: 'æ¨™æ¦œå®Œç¾å‘ˆç¾å„åœ‹é¢¨å‘³æ–™ç†ï¼Œèœè‰²ç²¾ç·»å¯Œæœ‰å‰µæ„ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 15:00 - 17:00', 'æ™šé¤ 18:00 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚ä¸»é¡Œç¾é£Ÿç¯€ã€åœ‹å®šå‡æ—¥åŠé€£å‡ä¸é©ç”¨ã€‚ç›®å‰å·²å”®ç½„ï¼Œå»ºè­°é—œæ³¨è£œè²¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23440-le-meridien-taipei-hotel-meal-voucher-latest-recipe',
            image: IMG_PREMIUM
          },
          {
            id: '3.1',
            name: 'å°åŒ—å£«æ—è¬éº—é…’åº—ï½œå£«æ—å»šæˆ¿',
            type: RestaurantType.Set,
            price: 520,
            priceDisplay: '$520 èµ·',
            location: 'å£«æ—å®˜é‚¸',
            address: 'å°åŒ—å¸‚å£«æ—å€ä¸­å±±åŒ—è·¯äº”æ®µ 470 å·· 8 è™Ÿ',
            sellingPoint: 'æ¥µå…·ç«¶çˆ­åŠ›çš„è¦ªæ°‘åƒ¹æ ¼ï¼Œç·Šé„°å£«æ—å®˜é‚¸ï¼Œè½åœ°çª—æ™¯è§€å„ªç¾ã€‚æä¾›åŠè‡ªåŠ©æˆ–å¥—é¤é¸æ“‡ã€‚',
            features: 'å¤šæ¨£åŒ–çš„è‡ªåŠ©å§ï¼Œèœè‰²åŒ…å«ç‰›æ’ã€éµæ¿ç‡’ã€æµ·é®®ç­‰ï¼Œæ»¿è¶³å°ä¸»é£Ÿèˆ‡æµ·é®®çš„åå¥½ã€‚',
            hours: ['æ—©é¤ 06:30 - 10:00', 'åˆé¤ 12:00 - 14:00', 'æ™šé¤ 18:00 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚æ­¤å„ªæƒ æ•ä¸èˆ‡è¬è±ªæœƒå“¡ç©åˆ†ç´¯ç©åŠå„é …ç¦åˆ©åˆä½µä½¿ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/101917',
            image: IMG_STEAK
          },
          {
            id: '3.2',
            name: 'å°åŒ—åŒ—æŠ•å¤©ç¥æ³‰æœƒé¤¨ï½œå¤©é¥—é£ŸåŠ',
            type: RestaurantType.Set,
            price: 650,
            priceDisplay: '$650 èµ·',
            location: 'æ–°åŒ—æŠ•',
            address: 'å°åŒ—å¸‚åŒ—æŠ•å€ä¸­å±±è·¯ 3 è™Ÿ',
            sellingPoint: 'é„°è¿‘æ–°åŒ—æŠ•æ·é‹ç«™ï¼Œäº¤é€šä¾¿åˆ©ã€‚æ—…å®¢äº«å—åŒ—æŠ•æº«æ³‰å‰å¾Œï¼Œå°‹æ±‚ä¾¿åˆ©èˆ‡æ‚ é–’é¤é£²çš„æœ€ä½³é¸æ“‡ã€‚',
            features: 'ç”±æ˜Ÿç´šå»šå¸«åœ˜éšŠæ‰“é€ ã€Œç„¡åœ‹ç•Œæ–™ç†ã€ï¼Œä¸»æ‰“ç«é‹ç­‰æš–å¿ƒé¤é»ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 14:30 - 17:00', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚æ­¤é¤é£²æ–¹æ¡ˆç„¡æ³•ç”¨æ–¼æ³¡æ¹¯ã€‚ç‰¹æ®Šç¯€æ—¥ä½¿ç”¨éœ€è£œè¶³ç¾å ´åƒ¹å·®ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23782',
            image: IMG_JAPANESE
          },
          {
            id: '3.3',
            name: 'å°åŒ—åŒ—æŠ•è€çˆºé…’åº—ï½œPURE æ­å¼é¤å»³',
            type: RestaurantType.Set,
            price: 660,
            priceDisplay: '$660 èµ·',
            location: 'æ–°åŒ—æŠ•',
            address: 'å°åŒ—å¸‚åŒ—æŠ•å€ä¸­å’Œè¡— 2 è™Ÿ',
            sellingPoint: 'å¼·èª¿è³ªæ„Ÿèˆ‡å¥åº·ï¼Œéƒ¨åˆ†æ–¹æ¡ˆå¯æ­é…é ‚æ¨“ã€Œæ²æ³‰ç™‚ä¸­å¿ƒã€è£¸æ¹¯ï¼Œèº«å¿ƒéˆå…¨æ–¹ä½æ”¾é¬†ã€‚',
            features: 'ä»¥ç²¾ç·»æ³•å¼æ–™ç†æ‰‹æ³•ï¼Œæ¼”ç¹¹åœ¨åœ°ç•¶å­£é£Ÿæç´”ç²¹é¢¨å‘³ï¼Œå‘ˆç¾è¦–è¦ºèˆ‡å‘³è¦ºé›™é‡é¥—å®´ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'ä¸‹åˆèŒ¶ 14:30 - 16:30', 'æ™šé¤ 18:00 - 21:30', 'æ³‰ç™‚ä¸­å¿ƒ 07:30 - 22:30'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚è‹¥æ–¹æ¡ˆåŒ…å«æ³¡æ¹¯ï¼Œé¤é£²èˆ‡æ²ï¼æ³‰ç™‚ä¸­å¿ƒé™åŒæ—¥ä½¿ç”¨å®Œç•¢ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23810',
            image: IMG_STEAK
          },
          {
            id: '3.4',
            name: 'ç¦å®¹å¤§é£¯åº—å°åŒ—ä¸€é¤¨ï½œé †åœ’æ—¥æœ¬æ–™ç†',
            type: RestaurantType.Set,
            price: 800,
            priceDisplay: '$800 èµ·',
            location: 'å»ºåœ‹å—è·¯',
            address: 'å°åŒ—å¸‚å¤§å®‰å€å»ºåœ‹å—è·¯ä¸€æ®µ 266 è™Ÿ',
            sellingPoint: 'ç’°å¢ƒæ¸…å¹½å®‰éœï¼Œè¨­æœ‰å¯¬æ•æ˜äº®é–‹æ”¾å¼å»šæˆ¿ï¼Œé©åˆå°ˆå¿ƒäº¤è«‡æˆ–åå¥½å¯§éœæ°›åœçš„å®¢ç¾¤ã€‚',
            features: 'æä¾›ç²¾ç·»çš„å–®é»æˆ–å¥—é¤å¼æ—¥æœ¬æ–™ç†ï¼Œåš´é¸æ–°é®®æµ·é®®é£Ÿæï¼Œå‘ˆç¾é“åœ°æ—¥å¼é¢¨å‘³ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚è¾²æ›†æ˜¥ç¯€ã€æ¯è¦ªç¯€é€±æœ«ç­‰ç‰¹å®šæ—¥æœŸä¸é©ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/115429',
            image: IMG_JAPANESE
          },
          {
            id: '3.5',
            name: 'å°åŒ—è¬è±ªé…’åº—ï½œGarden Kitchen',
            type: RestaurantType.Set,
            price: 999,
            priceDisplay: '$999 èµ·',
            location: 'å¤§ç›´',
            address: 'å°åŒ—å¸‚ä¸­å±±å€æ¨‚ç¾¤äºŒè·¯ 199 è™Ÿ',
            sellingPoint: 'åæ“ç™‚ç™’èº«å¿ƒæ²³æ¿±æ™¯ç·»ï¼Œå¦‚åŒä¸€åº§éœè¬ã€Œéƒ½å¸‚èŠ±åœ’ã€ï¼Œç´„æœƒæˆ–æ…¶ç”Ÿçš„ç†æƒ³å ´åœ°ã€‚',
            features: 'åŠè‡ªåŠ©å¼ç”¨é¤ï¼Œé¸æ“‡ä¸€ä»½ç²¾ç·»ä¸»é¤ï¼Œä¸¦ç„¡é™äº«ç”¨è±ç››æ²™æ‹‰å§èˆ‡å„å¼å†·ç›¤å€ã€‚',
            hours: ['åˆé¤ 11:30 - 14:30', 'ä¸‹åˆèŒ¶ 15:00 - 17:00'],
            rules: 'éœ€æ–¼ç”¨é¤3å¤©å‰äº‹å…ˆè‡´é›»è¨‚ä½ã€‚åˆé¤èˆ‡ä¸‹åˆèŒ¶æ–¹æ¡ˆçš„å„ªæƒ æ•ˆæœŸä¸åŒï¼Œéœ€ç‰¹åˆ¥æ³¨æ„ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/115103-meal-coupons-taipei-marriott-hotel-garden-kitchen',
            image: IMG_STEAK
          },
          {
            id: '3.6',
            name: 'ç¦å®¹å¤§é£¯åº—å°åŒ—ä¸€é¤¨ï½œç¦ç²µæ¨“',
            type: RestaurantType.Set,
            price: 1380,
            priceDisplay: '$1,380 èµ·',
            location: 'å»ºåœ‹å—è·¯',
            address: 'å°åŒ—å¸‚å¤§å®‰å€å»ºåœ‹å—è·¯ä¸€æ®µ 266 è™Ÿ',
            sellingPoint: 'ç¦å®¹é«”ç³»æ‹›ç‰Œä¸­é¤å»³ï¼Œç©©é‡æ°£æ´¾ç’°å¢ƒï¼Œå¸¶é•·è¼©ç”¨é¤æˆ–èˆ‰è¾¦å®¶åº­èšé¤çš„ç†æƒ³é¸æ“‡ã€‚',
            features: 'æ±²å–é£Ÿèˆ‡è—ç²¾ç²¹ï¼Œæä¾›ç²¾ç·»æ¸¯å¼é»å¿ƒèˆ‡å‚³çµ±ç²µèœæ–™ç†ï¼Œå±•ç¾ç£…ç¤¡æ°£å‹¢ä¸­å¼é¢¨ç¯„ã€‚',
            hours: ['åˆé¤ 11:30 - 14:00', 'æ™šé¤ 17:30 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚è–èª•ç¯€ã€è·¨å¹´ç­‰ç‰¹å®šæ—¥æœŸä¸é©ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/266912',
            image: IMG_CHINESE
          },
          {
            id: '3.7',
            name: 'å°åŒ—è‰¾éº—é…’åº—ï½œLA FARFALLA ç¾©å¼é¤å»³',
            type: RestaurantType.Set,
            price: 1799,
            priceDisplay: '$1,799 èµ·',
            location: 'ä¿¡ç¾©å€',
            address: 'å°åŒ—å¸‚ä¿¡ç¾©å€æ¾é«˜è·¯ 18 è™Ÿ',
            sellingPoint: 'ä½æ–¼æ™‚å°šæ ¸å¿ƒä¿¡ç¾©å€ï¼Œé¤å»³æ°›åœç¾ä»£é›…ç·»ï¼Œé©åˆè¿½æ±‚ç”Ÿæ´»å“å‘³ã€å–œæ„›ç²¾ç·»é¤é£²çš„å®¢ç¾¤ã€‚',
            features: 'åš´é¸ç•¶å­£é£Ÿæï¼Œå¤šæ¨£ç‡’çƒ¤è‚‰é¡ä¸»é¤å¦‚ã€Œçˆçƒ¤ç¾åœ‹é ‚ç´šç‰›è‚©èƒ›è‚‰ã€ï¼Œæ­é…è±å¯Œè¼•é£Ÿæ²™æ‹‰å§ã€‚',
            hours: ['åˆé¤ 11:30 - 14:30', 'ä¸‹åˆèŒ¶ 15:00 - 17:00 (é€±äº”-æ—¥)', 'æ™šé¤ 18:00 - 22:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ã€‚åœ‹å®šå‡æ—¥ã€ç‰¹æ®Šç¯€æ—¥åŠé€£çºŒå‡æœŸä¸é©ç”¨ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/119263-taipei-humble-house-ellie-hotel-la-farfalla-italian-restaurant-meal-coupon-taipei-taiwan',
            image: IMG_STEAK
          },
          {
            id: '3.8',
            name: 'å°åŒ—å›å“é…’åº—ï½œèŒ¶è‹‘',
            type: RestaurantType.Set,
            price: 1899,
            priceDisplay: '$1,899 èµ·',
            location: 'å°åŒ—è»Šç«™',
            address: 'å°åŒ—å¸‚å¤§åŒå€æ‰¿å¾·è·¯ä¸€æ®µ 3 è™Ÿ',
            sellingPoint: 'æ¿ƒåšã€Œæ­å¼å¤å ¡å¥¢è¯æ„Ÿã€ï¼Œæ°›åœç¨ç‰¹æµªæ¼«ï¼Œæƒ…ä¾¶ç´„æœƒæˆ–æ…¶ç¥é‡è¦ç´€å¿µæ—¥çš„é ‚ç´šé¸æ“‡ã€‚',
            features: 'çµåˆã€Œé ‚ç´šç‰›æ’ã€èˆ‡ã€Œæµ·é®®ã€ï¼Œæ‰“é€ å¥¢è¯æµ·é™¸é¥—å®´ï¼Œå°ˆæ³¨æ–¼é«˜ç«¯é£Ÿæå®Œç¾å‘ˆç¾ã€‚',
            hours: ['åˆé¤ 12:00 - 14:30', 'æ™šé¤ 18:00 - 21:00'],
            rules: 'éœ€äº‹å…ˆè‡´é›»è¨‚ä½ä¸¦å‘ŠçŸ¥ä¿¡è¨—è™Ÿç¢¼ã€‚ç‰¹æ®Šç¯€æ—¥ä½¿ç”¨éœ€è£œè¶³ç¾å ´åƒ¹å·®ã€‚',
            url: 'https://www.kkday.com/zh-tw/product/23298',
            image: IMG_STEAK
          }
        ];

        const getInitialData = () => {
            const data = [...RESTAURANT_DATA];
            for (let i = data.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [data[i], data[j]] = [data[j], data[i]];
            }
            return data;
        };

        // --- Component: Card ---
        const Card = ({ data, isFront, onFlip }) => {
          const [imageLoaded, setImageLoaded] = useState(false);

          return (
            <div className="relative w-full h-full perspective-1000">
                <motion.div
                    className="w-full h-full relative preserve-3d"
                    animate={{ rotateY: isFront ? 0 : 180 }}
                    transition={{ type: "spring", stiffness: 300, damping: 25, duration: 0.25 }}
                    style={{ transformStyle: 'preserve-3d' }}
                >
                    {/* Front Face */}
                    <div 
                        className="absolute inset-0 backface-hidden w-full h-full bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col cursor-pointer"
                        onClick={onFlip}
                        style={{ backfaceVisibility: 'hidden' }}
                    >
                        {/* Image Section */}
                        <div className="h-3/4 relative bg-gray-200">
                            {!imageLoaded && (
                                <div className="absolute inset-0 flex items-center justify-center animate-pulse bg-gray-200 z-0">
                                    <span className="text-gray-400 text-xs">Loading...</span>
                                </div>
                            )}
                            <img 
                                src={data.image} 
                                alt={data.name} 
                                className={clsx(
                                    "w-full h-full object-cover pointer-events-none transition-opacity duration-300",
                                    imageLoaded ? "opacity-100" : "opacity-0"
                                )}
                                onLoad={() => setImageLoaded(true)}
                            />
                            <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-t from-black/80 via-transparent to-transparent pointer-events-none" />
                            
                            {/* Badges */}
                            <div className="absolute top-4 left-4 flex flex-wrap gap-2">
                                <span className={clsx(
                                    "px-3 py-1 rounded-full text-xs font-bold text-white shadow-sm backdrop-blur-md",
                                    data.type === RestaurantType.Buffet ? "bg-orange-600/90" : "bg-purple-600/90"
                                )}>
                                    {data.type === RestaurantType.Buffet ? 'è‡ªåŠ©é¤' : 'å¥—é¤'}
                                </span>
                                <span className="px-3 py-1 rounded-full text-xs font-bold bg-white/90 text-gray-800 shadow-sm backdrop-blur-md flex items-center">
                                    <MapPin size={10} className="mr-1" /> {data.location}
                                </span>
                            </div>

                            <div className="absolute bottom-0 left-0 right-0 p-5 text-white">
                                <h2 className="text-2xl font-bold leading-tight drop-shadow-md mb-1">{data.name}</h2>
                                <div className="flex items-baseline space-x-2">
                                     <p className="text-xl font-bold text-yellow-400 drop-shadow-md">{data.priceDisplay}</p>
                                </div>
                            </div>
                        </div>

                        {/* Short Features */}
                        <div className="h-1/4 p-5 bg-white relative flex flex-col justify-center">
                           <div className="absolute top-4 right-4 text-gray-400 animate-pulse">
                                <RotateCw size={20} />
                           </div>
                           
                           <div className="pr-8">
                                <p className="text-sm text-gray-600 line-clamp-3 leading-relaxed font-medium">
                                   {data.features}
                                </p>
                           </div>
                           <p className="text-xs text-center text-gray-400 mt-auto pt-2">é»æ“Šç¿»é¢æŸ¥çœ‹è©³ç´°è³‡è¨Š</p>
                        </div>
                    </div>

                    {/* Back Face */}
                    <div 
                        className="absolute inset-0 backface-hidden w-full h-full bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col cursor-pointer"
                        onClick={onFlip}
                        style={{ 
                            transform: 'rotateY(180deg)', 
                            backfaceVisibility: 'hidden' 
                        }}
                    >
                        {/* Header */}
                        <div className="bg-gray-50 p-4 border-b border-gray-100 flex justify-between items-center sticky top-0 z-10 shrink-0">
                            <h3 className="font-bold text-gray-800 truncate pr-2 text-sm">{data.name}</h3>
                            <button 
                                onClick={(e) => { e.stopPropagation(); onFlip(); }}
                                className="p-2 bg-gray-200 rounded-full hover:bg-gray-300 transition-colors"
                            >
                                <RotateCw size={16} />
                            </button>
                        </div>

                        {/* Content */}
                        <div className="overflow-y-auto flex-1 p-5 space-y-6 no-scrollbar">
                            
                            {/* Basic Info */}
                            <div className="grid grid-cols-2 gap-3 mb-2">
                                <div className="bg-orange-50 p-3 rounded-xl border border-orange-100 flex flex-col items-center justify-center text-center">
                                    <span className="text-xs text-gray-500 mb-1">é¡å‹</span>
                                    <span className="font-bold text-gray-800 text-sm">{data.type === RestaurantType.Buffet ? 'è‡ªåŠ©é¤' : 'å¥—é¤'}</span>
                                </div>
                                <div className="bg-green-50 p-3 rounded-xl border border-green-100 flex flex-col items-center justify-center text-center">
                                     <span className="text-xs text-gray-500 mb-1">åƒ¹æ ¼</span>
                                     <span className="font-bold text-green-700 text-sm">{data.priceDisplay}</span>
                                </div>
                            </div>

                            <section>
                                <h4 className="text-sm font-bold text-gray-900 mb-2 flex items-center border-l-4 border-orange-500 pl-2">
                                    æ ¸å¿ƒè³£é»
                                </h4>
                                <p className="text-sm text-gray-600 leading-relaxed bg-gray-50 p-3 rounded-lg">
                                    {data.sellingPoint}
                                </p>
                            </section>

                            <section>
                                <h4 className="text-sm font-bold text-gray-900 mb-2 flex items-center border-l-4 border-blue-500 pl-2">
                                    é¤é»ç‰¹è‰²
                                </h4>
                                <p className="text-sm text-gray-600 leading-relaxed text-justify">
                                    {data.features}
                                </p>
                            </section>

                            <section>
                                <h4 className="text-sm font-bold text-gray-900 mb-2 flex items-center border-l-4 border-green-500 pl-2">
                                     ç‡Ÿæ¥­æ™‚æ®µ
                                </h4>
                                <ul className="text-sm text-gray-600 space-y-1.5">
                                    {data.hours.map((h, i) => (
                                        <li key={i} className="flex items-start">
                                            <Clock size={14} className="mt-1 mr-2 text-gray-400 shrink-0" />
                                            {h}
                                        </li>
                                    ))}
                                </ul>
                            </section>

                            <section>
                                <h4 className="text-sm font-bold text-gray-900 mb-2 flex items-center border-l-4 border-red-500 pl-2">
                                    æ–¹æ¡ˆè¦å‰‡
                                </h4>
                                <div className="flex items-start">
                                    <AlertCircle size={14} className="mt-1 mr-2 text-red-400 shrink-0" />
                                    <p className="text-xs text-gray-500 leading-relaxed">
                                        {data.rules}
                                    </p>
                                </div>
                            </section>

                            <section>
                                <h4 className="text-sm font-bold text-gray-900 mb-2 flex items-center border-l-4 border-purple-500 pl-2">
                                    åœ°é»è³‡è¨Š
                                </h4>
                                <p className="text-sm text-gray-600 mb-3 ml-2">{data.address}</p>
                                <div className="flex gap-2">
                                    <a 
                                        href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(data.name)}`}
                                        target="_blank"
                                        rel="noreferrer"
                                        className="flex-1 flex items-center justify-center py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-xs font-bold text-gray-700 transition-colors"
                                        onClick={(e) => e.stopPropagation()}
                                    >
                                        <Map size={14} className="mr-1.5" /> åœ°åœ–
                                    </a>
                                    <a 
                                        href={`https://www.google.com/search?q=${encodeURIComponent(data.name + ' é›»è©±')}`}
                                        target="_blank"
                                        rel="noreferrer"
                                        className="flex-1 flex items-center justify-center py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-xs font-bold text-gray-700 transition-colors"
                                        onClick={(e) => e.stopPropagation()}
                                    >
                                        <Phone size={14} className="mr-1.5" /> æŸ¥è©¢é›»è©±
                                    </a>
                                </div>
                            </section>
                        </div>
                        
                        {/* Footer */}
                        <div className="p-4 border-t border-gray-100 bg-white shrink-0">
                            <a 
                                href={data.url} 
                                target="_blank" 
                                rel="noreferrer"
                                className="flex items-center justify-center w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg active:scale-95 transition-transform"
                                onClick={(e) => e.stopPropagation()}
                            >
                                å‰å¾€è³¼ç¥¨ / è¨‚ä½ <ExternalLink size={16} className="ml-2" />
                            </a>
                        </div>
                    </div>
                </motion.div>
            </div>
          );
        };

        // --- Component: SwipeDeck ---
        const SwipeDeck = ({ restaurants, onSwipe }) => {
          const [isFlipped, setIsFlipped] = useState(false);
          const controls = useAnimation();
          const x = useMotionValue(0);
          const y = useMotionValue(0);
          const rotate = useTransform(x, [-200, 200], [-15, 15]);
          const startTimeRef = useRef(Date.now());
          
          const likeOpacity = useTransform(x, [10, 100], [0, 1]);
          const dislikeOpacity = useTransform(x, [-10, -100], [0, 1]);
          const superLikeOpacity = useTransform(y, [-10, -100], [0, 1]);

          const currentRestaurant = restaurants[0];

          useEffect(() => {
            startTimeRef.current = Date.now();
            setIsFlipped(false);
            x.set(0);
            y.set(0);
            controls.start({ x: 0, y: 0, rotate: 0, opacity: 1, scale: 1, transition: { duration: 0 } });
          }, [currentRestaurant, controls, x, y]);

          // Preload
          useEffect(() => {
              if (restaurants.length > 1) {
                  const img1 = new Image();
                  img1.src = restaurants[1].image;
              }
              if (restaurants.length > 2) {
                  const img2 = new Image();
                  img2.src = restaurants[2].image;
              }
          }, [restaurants]);

          const handleDragEnd = async (_, info) => {
            const offset = info.offset.x;
            const offsetY = info.offset.y;
            const velocity = info.velocity.x;
            const dwellTime = Date.now() - startTimeRef.current;
            const threshold = 100;

            if (offsetY < -threshold) {
                await controls.start({ y: -1000, opacity: 0, transition: { duration: 0.3 } });
                onSwipe(currentRestaurant.id, InteractionStatus.SuperLike, dwellTime);
                return;
            }

            if (offset > threshold || velocity > 500) {
              await controls.start({ x: 800, rotate: 20, opacity: 0, transition: { duration: 0.3 } });
              onSwipe(currentRestaurant.id, InteractionStatus.Like, dwellTime);
            } 
            else if (offset < -threshold || velocity < -500) {
              await controls.start({ x: -800, rotate: -20, opacity: 0, transition: { duration: 0.3 } });
              onSwipe(currentRestaurant.id, InteractionStatus.Dislike, dwellTime);
            } 
            else {
              controls.start({ x: 0, y: 0, rotate: 0, transition: { type: "spring", stiffness: 300, damping: 20 } });
            }
          };

          const manualSwipe = async (status) => {
            if (!currentRestaurant) return;
            const dwellTime = Date.now() - startTimeRef.current;
            
            if (status === InteractionStatus.Like) {
                await controls.start({ x: 800, rotate: 20, opacity: 0, transition: { duration: 0.3 } });
            } else if (status === InteractionStatus.Dislike) {
                await controls.start({ x: -800, rotate: -20, opacity: 0, transition: { duration: 0.3 } });
            } else if (status === InteractionStatus.SuperLike) {
                await controls.start({ y: -1000, opacity: 0, transition: { duration: 0.3 } });
            } else if (status === InteractionStatus.Block) {
                await controls.start({ scale: 0, opacity: 0, transition: { duration: 0.3 } });
            }

            onSwipe(currentRestaurant.id, status, dwellTime);
          };

          if (!currentRestaurant) {
            return (
              <div className="flex flex-col items-center justify-center h-full text-center p-8 space-y-6 animate-fade-in">
                <div className="w-24 h-24 bg-gradient-to-tr from-yellow-100 to-orange-100 rounded-full flex items-center justify-center text-5xl shadow-inner">ğŸ‰</div>
                <div>
                    <h2 className="text-2xl font-bold text-gray-800 mb-2">å…¨éƒ¨æ»‘å®Œå›‰ï¼</h2>
                    <p className="text-gray-500">å¿«å»ã€Œæ¸…å–®ã€æŸ¥çœ‹æ‚¨çš„å°ˆå±¬æ’åå§ã€‚</p>
                </div>
              </div>
            );
          }

          return (
            <div className="flex flex-col h-full w-full max-w-md mx-auto relative">
                {/* Top Spacer */}
                <div className="h-4 flex-none" />

                {/* Card Area */}
                <div className="flex-1 w-full flex items-center justify-center px-4 relative min-h-0">
                    {/* Background placeholders */}
                    {restaurants.length > 1 && (
                        <div className="absolute w-[90%] h-[90%] top-6 bg-white rounded-3xl shadow-md transform scale-95 -z-10 opacity-70"></div>
                    )}
                    {restaurants.length > 2 && (
                        <div className="absolute w-[86%] h-[86%] top-9 bg-white rounded-3xl shadow-sm transform scale-90 -z-20 opacity-40"></div>
                    )}

                    {/* Draggable Card */}
                    <motion.div 
                        key={currentRestaurant.id} 
                        className="w-full h-full relative z-10 touch-none cursor-grab active:cursor-grabbing max-h-[60vh] aspect-[3/4]"
                        drag={!isFlipped}
                        dragConstraints={{ left: 0, right: 0, top: 0, bottom: 0 }}
                        dragElastic={0.6}
                        onDragEnd={handleDragEnd}
                        animate={controls}
                        style={{ x, y, rotate }}
                        whileTap={!isFlipped ? { scale: 1.02 } : {}}
                    >
                        {/* Overlays */}
                        {!isFlipped && (
                            <>
                                <motion.div style={{ opacity: likeOpacity }} className="absolute top-8 left-6 z-20 border-4 border-green-500 rounded-lg px-3 py-1 bg-white/30 backdrop-blur-sm pointer-events-none -rotate-12">
                                    <span className="text-3xl font-black text-green-600 uppercase">LIKE</span>
                                </motion.div>
                                <motion.div style={{ opacity: dislikeOpacity }} className="absolute top-8 right-6 z-20 border-4 border-red-500 rounded-lg px-3 py-1 bg-white/30 backdrop-blur-sm pointer-events-none rotate-12">
                                    <span className="text-3xl font-black text-red-600 uppercase">NOPE</span>
                                </motion.div>
                                <motion.div style={{ opacity: superLikeOpacity }} className="absolute bottom-20 left-1/2 -translate-x-1/2 z-20 border-4 border-blue-500 rounded-lg px-3 py-1 bg-white/30 backdrop-blur-sm pointer-events-none">
                                    <span className="text-3xl font-black text-blue-500 uppercase">SUPER</span>
                                </motion.div>
                            </>
                        )}

                        <Card 
                            data={currentRestaurant} 
                            isFront={!isFlipped} 
                            onFlip={() => setIsFlipped(!isFlipped)} 
                        />
                    </motion.div>
                </div>

                {/* Info Text */}
                <div className="flex-none text-center py-2 opacity-50 text-xs text-gray-500">
                    {isFlipped ? "é»æ“ŠèƒŒé¢ç¿»å›" : "é»æ“Šå¡ç‰‡æŸ¥çœ‹è©³æƒ…"}
                </div>

                {/* Controls */}
                <div className="flex-none flex justify-center items-center gap-6 px-6 pt-2 pb-24 z-30">
                    <button 
                        onClick={() => manualSwipe(InteractionStatus.Block)}
                        className="w-12 h-12 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center hover:bg-gray-300 transition-transform active:scale-90"
                    >
                        <Ban size={20} />
                    </button>
                    
                    <button 
                        onClick={() => manualSwipe(InteractionStatus.Dislike)}
                        className="w-16 h-16 rounded-full bg-white text-red-500 shadow-xl flex items-center justify-center border border-red-50 hover:bg-red-50 transition-transform active:scale-90"
                    >
                        <X size={32} />
                    </button>

                    <button 
                        onClick={() => manualSwipe(InteractionStatus.Like)}
                        className="w-16 h-16 rounded-full bg-white text-green-500 shadow-xl flex items-center justify-center border border-green-50 hover:bg-green-50 transition-transform active:scale-90"
                    >
                        <Heart size={32} fill="currentColor" />
                    </button>

                     <button 
                        onClick={() => manualSwipe(InteractionStatus.SuperLike)}
                        className="w-12 h-12 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center hover:bg-blue-100 transition-transform active:scale-90"
                    >
                        <Star size={20} fill="currentColor" />
                    </button>
                </div>
            </div>
          );
        };

        // --- Component: ListView ---
        const ListView = ({ restaurants, interactions, onRemoveInteraction, onSelectRestaurant }) => {
          const [sortedList, setSortedList] = useState([]);

          useEffect(() => {
            const list = restaurants
                .map(r => ({ r, i: interactions.find(int => int.restaurantId === r.id) }))
                .filter(item => item.i !== undefined);

            const score = (item) => {
                if (!item.i) return 0;
                switch (item.i.status) {
                    case InteractionStatus.SuperLike: return 1000 + (item.i.dwellTimeMs / 1000); 
                    case InteractionStatus.Like: return 500 + (item.i.dwellTimeMs / 1000); 
                    case InteractionStatus.None: return 0;
                    case InteractionStatus.Dislike: return -500;
                    case InteractionStatus.Block: return -1000;
                    default: return 0;
                }
            };

            const sorted = list.sort((a, b) => score(b) - score(a));
            setSortedList(sorted);
          }, [restaurants, interactions]);

          const moveItem = (index, direction) => {
            const newList = [...sortedList];
            const targetIndex = direction === 'up' ? index - 1 : index + 1;

            if (targetIndex >= 0 && targetIndex < newList.length) {
                [newList[index], newList[targetIndex]] = [newList[targetIndex], newList[index]];
                setSortedList(newList);
            }
          };

          const getStatusIcon = (status) => {
            switch (status) {
                case InteractionStatus.SuperLike: return <Star className="text-blue-500" size={16} fill="currentColor" />;
                case InteractionStatus.Like: return <Heart className="text-green-500" size={16} fill="currentColor" />;
                case InteractionStatus.Dislike: return <X className="text-red-300" size={16} />;
                case InteractionStatus.Block: return <Ban className="text-gray-400" size={16} />;
                default: return null;
            }
          };

          const getDistrict = (address) => {
              const match = address.match(/(?:å°åŒ—å¸‚|æ–°åŒ—å¸‚)(.+?[å€é„‰é®å¸‚])/);
              return match ? match[1] : 'å¤§å°åŒ—';
          };

          const copyToClipboard = () => {
              const text = sortedList.map((item, index) => 
                `${index + 1}. ${item.r.name} - ${item.i?.status === InteractionStatus.SuperLike ? 'â¤ï¸ è¶…å–œæ­¡' : 'ğŸ‘ å–œæ­¡'}`
              ).join('\n');
              
              navigator.clipboard.writeText(`æˆ‘çš„é¤åˆ¸æ’åï¼š\n${text}`);
              alert('å·²è¤‡è£½æ’åï¼');
          };

          if (sortedList.length === 0) {
              return (
                  <div className="flex flex-col items-center justify-center h-full text-gray-400 p-8 text-center">
                      <p className="mb-4">å°šæœªè©•åˆ†ä»»ä½•é¤å»³</p>
                      <p className="text-sm">å»ã€Œæ¢ç´¢ã€é é¢æ»‘æ»‘çœ‹å§ï¼</p>
                  </div>
              );
          }

          return (
            <div className="flex flex-col h-full bg-gray-50 relative">
                {/* Toolbar */}
                <div className="flex justify-end p-2 bg-white border-b border-gray-100 shadow-sm sticky top-0 z-10">
                    <button 
                        onClick={copyToClipboard}
                        className="flex items-center px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-xs font-bold transition-colors"
                    >
                        <Share2 size={14} className="mr-1.5" /> åˆ†äº«/è¤‡è£½æ’å
                    </button>
                </div>

                {/* List */}
                <div className="overflow-y-auto flex-1 p-4 space-y-3 pb-32">
                    {sortedList.map((item, index) => (
                        <div 
                            key={item.r.id} 
                            className={clsx(
                                "bg-white rounded-xl shadow-sm border border-gray-100 p-3 flex items-center transition-all cursor-pointer hover:shadow-md active:scale-[0.99]",
                                (item.i?.status === InteractionStatus.Dislike || item.i?.status === InteractionStatus.Block) && "opacity-60 bg-gray-50"
                            )}
                            onClick={() => onSelectRestaurant(item.r)}
                        >
                            <div className="w-8 font-black text-gray-300 text-lg text-center shrink-0">
                                {index + 1}
                            </div>
                            <img 
                                src={item.r.image} 
                                alt={item.r.name} 
                                className={clsx(
                                    "w-14 h-14 rounded-lg object-cover ml-2 shrink-0 bg-gray-200",
                                    item.i?.status === InteractionStatus.Block && "grayscale"
                                )} 
                            />
                            <div className="ml-3 flex-1 min-w-0">
                                <div className="flex items-center">
                                     <h3 className={clsx(
                                         "font-bold text-sm truncate pr-2 text-gray-800",
                                         item.i?.status === InteractionStatus.Block && "line-through text-gray-400"
                                     )}>
                                         {item.r.name}
                                     </h3>
                                     {getStatusIcon(item.i?.status)}
                                </div>
                                <div className="flex flex-wrap gap-1.5 mt-1.5">
                                     <span className={clsx(
                                         "text-[10px] px-1.5 py-0.5 rounded text-white font-medium",
                                         item.r.type === RestaurantType.Buffet ? "bg-orange-500" : "bg-purple-500"
                                     )}>
                                         {item.r.type === RestaurantType.Buffet ? 'è‡ªåŠ©é¤' : 'å¥—é¤'}
                                     </span>
                                     <span className="text-[10px] px-1.5 py-0.5 rounded bg-gray-100 text-gray-600 font-medium flex items-center">
                                         <MapPin size={8} className="mr-0.5" /> {getDistrict(item.r.address)}
                                     </span>
                                </div>
                                <div className="flex items-center justify-between mt-1">
                                     <p className="text-xs text-gray-500">{item.r.priceDisplay}</p>
                                </div>
                            </div>
                            <div className="flex flex-col gap-1 ml-2 shrink-0" onClick={(e) => e.stopPropagation()}>
                                <div className="flex gap-1">
                                    <button 
                                        onClick={() => moveItem(index, 'up')}
                                        disabled={index === 0}
                                        className="p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30"
                                    >
                                        <ArrowUp size={14} />
                                    </button>
                                    <button 
                                        onClick={() => moveItem(index, 'down')}
                                        disabled={index === sortedList.length - 1}
                                        className="p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30"
                                    >
                                        <ArrowDown size={14} />
                                    </button>
                                </div>
                                <button 
                                    onClick={() => onRemoveInteraction(item.r.id)}
                                    className="flex items-center justify-center p-1.5 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded mt-1 group"
                                    title="é‡æ–°è©•åˆ†"
                                >
                                    <RotateCcw size={14} />
                                    <span className="text-[10px] ml-1 font-bold">é‡è©•</span>
                                </button>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
          );
        };

        // --- Component: App ---
        const View = {
            Swipe: 'swipe',
            List: 'list'
        };

        const App = () => {
          const [view, setView] = useState(View.Swipe);
          const [restaurants, setRestaurants] = useState([]);
          const [interactions, setInteractions] = useState([]);
          
          const [selectedRestaurant, setSelectedRestaurant] = useState(null);
          const [modalIsFlipped, setModalIsFlipped] = useState(false);

          useEffect(() => {
            setRestaurants(getInitialData());
          }, []);

          const handleSwipe = (id, status, dwellTimeMs) => {
            setInteractions(prev => {
              const filtered = prev.filter(i => i.restaurantId !== id);
              return [...filtered, { restaurantId: id, status, timestamp: Date.now(), dwellTimeMs }];
            });
          };

          const handleRemoveInteraction = (id) => {
              setInteractions(prev => prev.filter(i => i.restaurantId !== id));
          };

          const handleSelectRestaurant = (restaurant) => {
              setSelectedRestaurant(restaurant);
              setModalIsFlipped(false);
          };

          const handleCloseModal = () => {
              setSelectedRestaurant(null);
          };

          const handleResetFromModal = (id) => {
              handleRemoveInteraction(id);
              handleCloseModal();
          };

          const unratedRestaurants = restaurants.filter(
              r => !interactions.some(i => i.restaurantId === r.id)
          );
          
          const selectedIsRated = selectedRestaurant && interactions.some(i => i.restaurantId === selectedRestaurant.id);

          return (
            <div className="fixed inset-0 w-full h-full bg-gray-50 flex flex-col font-sans text-gray-900 overflow-hidden">
              {/* Header */}
              <header className="flex-none bg-white shadow-sm z-30">
                <div className="flex justify-center items-center py-3 border-b border-gray-100">
                   <div className="bg-gradient-to-tr from-orange-500 to-pink-500 text-white p-1 rounded mr-2">
                        <Flame size={16} fill="currentColor" />
                   </div>
                   <h1 className="text-lg font-extrabold tracking-tight text-gray-800">
                     Gourmet Swipe
                   </h1>
                </div>
                
                <div className="p-2 bg-white">
                    <div className="bg-gray-100 p-1 rounded-xl flex relative">
                        <button 
                            onClick={() => setView(View.Swipe)}
                            className={clsx(
                                "flex-1 py-2 rounded-lg text-sm font-bold transition-all duration-200 flex items-center justify-center gap-2 relative z-10",
                                view === View.Swipe ? "bg-white text-orange-600 shadow-sm" : "text-gray-500 hover:text-gray-700"
                            )}
                        >
                            <Flame size={16} className={view === View.Swipe ? "fill-orange-600" : ""} />
                            æ¢ç´¢
                        </button>
                        <button 
                            onClick={() => setView(View.List)}
                            className={clsx(
                                "flex-1 py-2 rounded-lg text-sm font-bold transition-all duration-200 flex items-center justify-center gap-2 relative z-10",
                                view === View.List ? "bg-white text-indigo-600 shadow-sm" : "text-gray-500 hover:text-gray-700"
                            )}
                        >
                            <Layers size={16} className={view === View.List ? "fill-indigo-600" : ""} />
                            æ¸…å–®
                            {interactions.length > 0 && (
                                <span className={clsx(
                                    "ml-1 text-[10px] px-1.5 rounded-full",
                                     view === View.List ? "bg-indigo-100 text-indigo-600" : "bg-gray-200 text-gray-500"
                                )}>
                                    {interactions.length}
                                </span>
                            )}
                        </button>
                    </div>
                </div>
              </header>

              {/* Main */}
              <main className="flex-1 relative w-full overflow-hidden">
                {view === View.Swipe ? (
                    <SwipeDeck restaurants={unratedRestaurants} onSwipe={handleSwipe} />
                ) : (
                    <ListView 
                        restaurants={restaurants} 
                        interactions={interactions} 
                        onRemoveInteraction={handleRemoveInteraction}
                        onSelectRestaurant={handleSelectRestaurant}
                    />
                )}
              </main>

              {/* Modal */}
              <AnimatePresence>
                  {selectedRestaurant && (
                    <motion.div 
                        className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        exit={{ opacity: 0 }}
                        onClick={handleCloseModal}
                    >
                        <motion.div 
                            className="w-full max-w-md h-[70vh] relative flex flex-col"
                            initial={{ scale: 0.9, y: 20 }}
                            animate={{ scale: 1, y: 0 }}
                            exit={{ scale: 0.9, y: 20 }}
                            onClick={(e) => e.stopPropagation()}
                        >
                            <button 
                                onClick={handleCloseModal}
                                className="absolute -top-12 right-0 p-2 bg-white/20 text-white rounded-full hover:bg-white/30 backdrop-blur-md z-50"
                            >
                                <X size={24} />
                            </button>
                            
                            <div className="flex-1 relative">
                                <Card 
                                    data={selectedRestaurant} 
                                    isFront={!modalIsFlipped} 
                                    onFlip={() => setModalIsFlipped(!modalIsFlipped)} 
                                />
                            </div>

                            {selectedIsRated && (
                                <div className="absolute -bottom-20 left-0 right-0 flex justify-center pb-8">
                                    <button
                                        onClick={() => handleResetFromModal(selectedRestaurant.id)}
                                        className="flex items-center gap-2 px-6 py-3 bg-white text-orange-600 font-bold rounded-full shadow-lg hover:bg-orange-50 active:scale-95 transition-all"
                                    >
                                        <RotateCcw size={18} />
                                        é‡æ–°çµ¦åˆ†
                                    </button>
                                </div>
                            )}
                        </motion.div>
                    </motion.div>
                  )}
              </AnimatePresence>
            </div>
          );
        };

        // --- Render ---
        const root = createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
