<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ËÅöÈ§êÈªûÂêçËàáÂàÜÂ∏≥Ë°®</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        .sync-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #10b981;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyB4qMOaHSTv5-qt6LbbPZVGrJuxE1H3xE0",
            authDomain: "party-money-1219b.firebaseapp.com",
            projectId: "party-money-1219b",
            storageBucket: "party-money-1219b.firebasestorage.app",
            messagingSenderId: "584377171678",
            appId: "1:584377171678:web:41715d595c7d4378360c4f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        window.firebaseDB = db;
        window.firebaseDoc = doc;
        window.firebaseSetDoc = setDoc;
        window.firebaseOnSnapshot = onSnapshot;
        console.log('‚úÖ Firebase Â∑≤ÂàùÂßãÂåñ');
    </script>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        const Icons = {
            Plus: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Check: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="20 6 9 17 4 12"/></svg>,
            X: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Trash2: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            Edit2: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>,
            Sparkles: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>,
            Banknote: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></svg>,
            Share2: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>,
            Copy: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>,
            UserCheck: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></svg>,
            UserX: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="17" x2="22" y1="8" y2="13"/><line x1="22" x2="17" y1="8" y2="13"/></svg>
        };

        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/60 backdrop-blur-sm animate-fade-in p-0 sm:p-4">
                    <div className="bg-white w-full sm:max-w-md sm:rounded-2xl rounded-t-2xl shadow-2xl flex flex-col max-h-[90vh]">
                        <div className="flex justify-between items-center p-4 border-b border-slate-100">
                            <h3 className="font-bold text-lg text-slate-800">{title}</h3>
                            <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full text-slate-500">
                                <Icons.X size={20} />
                            </button>
                        </div>
                        <div className="overflow-y-auto p-4">{children}</div>
                    </div>
                </div>
            );
        };

        const ReportView = ({ stats, attendees }) => {
            const generateReport = () => {
                const date = new Date().toLocaleDateString('zh-TW');
                const perPerson = stats.perPersonCost;
                const paidList = attendees.filter(a => a.isPresent && a.hasPaid);
                const unpaidList = attendees.filter(a => a.isPresent && !a.hasPaid);
                
                let text = `üìÖ ËÅöÈ§êÂ†±Ë°® (${date})\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
                text += `üí∞ Á∏ΩÈ§êË≤ª : $${stats.totalBill.toLocaleString()}\n`;
                if(stats.publicFund > 0) text += `üè¶ ÂÖ¨Á©çÈáë : -$${stats.publicFund.toLocaleString()}\n`;
                text += `üßæ Êáâ‰ªòÁ∏ΩÈ°ç: $${stats.effectiveBill.toLocaleString()}\n`;
                text += `üë• ÂàÜÊî§‰∫∫Êï∏: ${stats.presentCount} ‰∫∫\n`;
                text += `üëâ ÊØè‰∫∫Êáâ‰ªò: $${perPerson.toLocaleString()}\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
                
                if (unpaidList.length > 0) {
                    text += `‚ùå Êú™‰ªòÊ¨æ (${unpaidList.length}):\n`;
                    unpaidList.forEach(p => text += `  - ${p.name}\n`);
                    text += `\n`;
                }
                
                if (paidList.length > 0) {
                    text += `‚úÖ Â∑≤‰ªòÊ¨æ (${paidList.length}):\n`;
                    paidList.forEach(p => text += `  - ${p.name}\n`);
                }
                
                return text;
            };

            const [copied, setCopied] = useState(false);
            const handleCopy = () => {
                navigator.clipboard.writeText(generateReport()).then(() => {
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                });
            };

            return (
                <div className="space-y-4">
                    <textarea readOnly value={generateReport()} className="w-full h-64 p-3 text-sm font-mono bg-slate-50 border rounded-lg resize-none" />
                    <button onClick={handleCopy} className={`w-full py-3 rounded-xl font-bold text-white flex justify-center items-center gap-2 ${copied ? 'bg-emerald-500' : 'bg-indigo-600'}`}>
                        {copied ? <><Icons.Check size={18}/> Â∑≤Ë§áË£Ω</> : <><Icons.Copy size={18}/> Ë§áË£ΩÂ†±Ë°®</>}
                    </button>
                </div>
            );
        };

        const App = () => {
            const [attendees, setAttendees] = useState([]);
            const [totalBill, setTotalBill] = useState(0);
            const [publicFund, setPublicFund] = useState(0);
            const [isLoading, setIsLoading] = useState(true);
            const [isSynced, setIsSynced] = useState(false);
            const [modalMode, setModalMode] = useState(null);
            const [editingId, setEditingId] = useState(null);
            const [formData, setFormData] = useState({ name: '', vision: '', remarks: '', hasPaid: false });
            const isUpdatingFromFirebase = useRef(false);

            useEffect(() => {
                if (!window.firebaseDB) {
                    console.error('‚ùå Firebase Êú™ÂàùÂßãÂåñ');
                    return;
                }

                const docRef = window.firebaseDoc(window.firebaseDB, "partyData", "current");
                console.log('üîÑ ÈñãÂßãÁõ£ËÅΩ Firebase...');
                
                const unsubscribe = window.firebaseOnSnapshot(docRef, (snapshot) => {
                    console.log('üì• Êî∂Âà∞ Firebase Êõ¥Êñ∞');
                    if (snapshot.exists()) {
                        const data = snapshot.data();
                        console.log('‚úÖ Ë≥áÊñô:', data);
                        isUpdatingFromFirebase.current = true;
                        setAttendees(data.attendees || []);
                        setTotalBill(data.totalBill || 0);
                        setPublicFund(data.publicFund || 0);
                        setIsSynced(true);
                        setTimeout(() => { isUpdatingFromFirebase.current = false; }, 100);
                    } else {
                        console.log('üìù ÂàùÊ¨°Âª∫Á´ãË≥áÊñô');
                        const defaultData = {
                            attendees: [
                                { id: '1', name: 'Êô∫Êòé', isPresent: true, hasPaid: false, vision: '', remarks: 'ÁôºËµ∑‰∫∫' },
                                { id: '2', name: 'Áß¶ÊòåÊÖà', isPresent: true, hasPaid: false, vision: '', remarks: 'Ë≤†Ë≤¨ÈªûÂêç' }
                            ],
                            totalBill: 0,
                            publicFund: 0
                        };
                        setAttendees(defaultData.attendees);
                        saveToFirebase(defaultData);
                    }
                    setIsLoading(false);
                }, (error) => {
                    console.error("‚ùå Firebase ÈåØË™§:", error);
                    setIsLoading(false);
                });

                return () => unsubscribe();
            }, []);

            const saveToFirebase = async (data) => {
                if (isUpdatingFromFirebase.current) {
                    console.log('‚è≠Ô∏è Ë∑≥ÈÅé (‰æÜËá™ Firebase ÁöÑÊõ¥Êñ∞)');
                    return;
                }
                if (!window.firebaseDB) return;

                try {
                    console.log('üíæ ÂÑ≤Â≠òÂà∞ Firebase...', data);
                    const docRef = window.firebaseDoc(window.firebaseDB, "partyData", "current");
                    await window.firebaseSetDoc(docRef, {
                        attendees: data.attendees || attendees,
                        totalBill: data.totalBill !== undefined ? data.totalBill : totalBill,
                        publicFund: data.publicFund !== undefined ? data.publicFund : publicFund,
                        lastUpdated: new Date()
                    });
                    console.log('‚úÖ ÂÑ≤Â≠òÊàêÂäü');
                    setIsSynced(true);
                } catch (error) {
                    console.error("‚ùå ÂÑ≤Â≠òÂ§±Êïó:", error);
                    setIsSynced(false);
                }
            };

            useEffect(() => {
                if (!isLoading && !isUpdatingFromFirebase.current) {
                    console.log('üîÑ Ë≥áÊñôËÆäÊõ¥ÔºåÊ∫ñÂÇôÂêåÊ≠•');
                    saveToFirebase({ attendees, totalBill, publicFund });
                }
            }, [attendees, totalBill, publicFund]);

            const stats = useMemo(() => {
                const presentList = attendees.filter(a => a.isPresent);
                const paidList = presentList.filter(a => a.hasPaid);
                const effectiveBill = Math.max(0, totalBill - publicFund);
                const perPersonCost = presentList.length > 0 ? Math.ceil(effectiveBill / presentList.length) : 0;
                return {
                    presentCount: presentList.length,
                    paidCount: paidList.length,
                    totalBill, publicFund, effectiveBill, perPersonCost
                };
            }, [attendees, totalBill, publicFund]);

            const openAdd = () => {
                setFormData({ name: '', vision: '', remarks: '', hasPaid: false });
                setEditingId(null);
                setModalMode('add');
            };

            const openEdit = (person) => {
                setFormData({ ...person });
                setEditingId(person.id);
                setModalMode('edit');
            };

            const saveAttendee = () => {
                if (!formData.name.trim()) return;
                const newItem = {
                    id: editingId || Date.now().toString(),
                    ...formData,
                    isPresent: editingId ? (attendees.find(a => a.id === editingId)?.isPresent ?? true) : true
                };
                if (editingId) {
                    setAttendees(prev => prev.map(p => p.id === editingId ? newItem : p));
                } else {
                    setAttendees(prev => [...prev, newItem]);
                }
                setModalMode(null);
            };

            const deleteAttendee = () => {
                if (confirm('Á¢∫ÂÆöÂà™Èô§?')) {
                    setAttendees(prev => prev.filter(p => p.id !== editingId));
                    setModalMode(null);
                }
            };

            const toggleAttendance = (id) => {
                setAttendees(prev => prev.map(p => p.id === id ? { ...p, isPresent: !p.isPresent } : p));
            };
            
            const togglePayment = (id, e) => {
                e.stopPropagation();
                setAttendees(prev => prev.map(p => p.id === id ? { ...p, hasPaid: !p.hasPaid } : p));
            };

            if (isLoading) {
                return (
                    <div className="max-w-lg mx-auto bg-white min-h-screen flex items-center justify-center">
                        <div className="text-center">
                            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"></div>
                            <p className="text-slate-500">ËºâÂÖ•‰∏≠...</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-lg mx-auto bg-white min-h-screen shadow-2xl flex flex-col pb-20">
                    <div className="bg-white p-4 sticky top-0 z-30 shadow-sm border-b">
                        <div className="flex justify-between items-center mb-4">
                            <h1 className="text-xl font-black text-slate-800 flex items-center gap-2">
                                <span className="bg-indigo-600 text-white p-1 rounded">ËÅö</span>
                                ËÅöÈ§êÂàÜÂ∏≥
                            </h1>
                            <div className="flex items-center gap-3">
                                {isSynced && (
                                    <div className="flex items-center gap-1.5 text-xs text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full">
                                        <span className="sync-indicator"></span>
                                        Â∑≤ÂêåÊ≠•
                                    </div>
                                )}
                                <button onClick={() => setModalMode('report')} className="text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-full text-sm font-bold flex items-center gap-1">
                                    <Icons.Share2 size={16}/> Â†±Ë°®
                                </button>
                            </div>
                        </div>

                        <div className="grid grid-cols-2 gap-3 mb-3">
                            <div className="bg-slate-50 p-2 rounded-xl border">
                                <label className="text-xs text-slate-500 font-bold block mb-1">Á∏ΩÈ§êË≤ª</label>
                                <input type="number" className="w-full bg-transparent text-lg font-bold text-slate-800 outline-none" placeholder="0" value={totalBill || ''} onChange={e => setTotalBill(Number(e.target.value))} />
                            </div>
                            <div className="bg-emerald-50 p-2 rounded-xl border border-emerald-100">
                                <label className="text-xs text-emerald-600 font-bold block mb-1">Êâ£ÂÖ¨Á©çÈáë</label>
                                <input type="number" className="w-full bg-transparent text-lg font-bold text-emerald-700 outline-none" placeholder="0" value={publicFund || ''} onChange={e => setPublicFund(Number(e.target.value))} />
                            </div>
                        </div>

                        <div className="bg-indigo-600 rounded-xl p-4 text-white shadow-lg flex justify-between items-center">
                            <div>
                                <div className="text-indigo-200 text-xs font-medium mb-1">ÊØè‰∫∫Êáâ‰ªò</div>
                                <div className="text-3xl font-bold">${stats.perPersonCost}</div>
                            </div>
                            <div className="text-right">
                                <div className="text-indigo-200 text-xs font-medium mb-1">Êî∂Ê¨æÈÄ≤Â∫¶</div>
                                <div className="font-bold text-lg">{stats.paidCount} <span className="text-indigo-300 text-sm">/ {stats.presentCount}</span></div>
                            </div>
                        </div>
                    </div>

                    <div className="flex-1 overflow-y-auto p-4 space-y-3">
                        {attendees.map((person, idx) => (
                            <div key={person.id} onClick={() => openEdit(person)} className={`p-4 rounded-2xl border cursor-pointer ${person.isPresent ? 'bg-white border-slate-200 shadow-sm' : 'bg-slate-50 border-slate-100 opacity-60'}`}>
                                <div className="flex justify-between items-center mb-2">
                                    <div className="flex items-center gap-3">
                                        <span className="text-slate-300 font-mono text-sm">#{idx+1}</span>
                                        <h3 className={`font-bold text-lg ${person.isPresent ? 'text-slate-800' : 'text-slate-400 line-through'}`}>{person.name}</h3>
                                    </div>
                                    <div className="flex gap-2">
                                        {person.isPresent && (
                                            <button onClick={(e) => togglePayment(person.id, e)} className={`w-9 h-9 rounded-full flex items-center justify-center border ${person.hasPaid ? 'bg-yellow-400 border-yellow-500 text-white' : 'bg-white border-slate-200 text-slate-300'}`}>
                                                <Icons.Banknote size={18} />
                                            </button>
                                        )}
                                        <button onClick={(e) => { e.stopPropagation(); toggleAttendance(person.id); }} className={`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 ${person.isPresent ? 'bg-indigo-100 text-indigo-700' : 'bg-slate-200 text-slate-500'}`}>
                                            {person.isPresent ? <Icons.UserCheck size={14}/> : <Icons.UserX size={14}/>}
                                            {person.isPresent ? 'Âá∫Â∏≠' : 'Áº∫Â∏≠'}
                                        </button>
                                    </div>
                                </div>
                                {person.isPresent && (person.vision || person.remarks) && (
                                    <div className="text-sm text-slate-500 mt-2 pl-8 space-y-1">
                                        {person.vision && (
                                            <div className="flex gap-1.5 items-start">
                                                <Icons.Sparkles size={14} className="text-purple-400 mt-0.5"/>
                                                <span className="text-purple-900/70 bg-purple-50 px-1.5 rounded">{person.vision}</span>
                                            </div>
                                        )}
                                        {person.remarks && (
                                            <div className="flex gap-1.5 items-start">
                                                <Icons.Edit2 size={14} className="text-slate-400 mt-0.5"/>
                                                <span>{person.remarks}</span>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>

                    <button onClick={openAdd} className="fixed bottom-6 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-xl flex items-center justify-center z-40">
                        <Icons.Plus size={28} />
                    </button>

                    <Modal isOpen={modalMode === 'report'} onClose={() => setModalMode(null)} title="üìã ÊñáÂ≠óÂ†±Ë°®">
                        <ReportView stats={stats} attendees={attendees} />
                    </Modal>

                    <Modal isOpen={modalMode === 'add' || modalMode === 'edit'} onClose={() => setModalMode(null)} title={modalMode === 'add' ? 'Êñ∞Â¢û‰∫∫Âì°' : 'Á∑®ËºØ‰∫∫Âì°'}>
                        <div className="space-y-4 p-1">
                            <div>
                                <label className="block text-sm font-bold text-slate-700 mb-1">ÂßìÂêç</label>
                                <input type="text" className="w-full p-3 bg-slate-50 border rounded-xl outline-none focus:border-indigo-500" placeholder="Ëº∏ÂÖ•ÂêçÂ≠ó" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />
                            </div>
                            <div onClick={() => setFormData(p => ({...p, hasPaid: !p.hasPaid}))} className={`flex items-center justify-between p-3 border rounded-xl cursor-pointer ${formData.hasPaid ? 'bg-emerald-50 border-emerald-300' : 'bg-white border-slate-200'}`}>
                                <div className="flex items-center gap-2">
                                    <div className={`p-1.5 rounded-full ${formData.hasPaid ? 'bg-emerald-100 text-emerald-600' : 'bg-slate-100 text-slate-400'}`}>
                                        <Icons.Banknote size={20} />
                                    </div>
                                    <span className={`font-bold ${formData.hasPaid ? 'text-emerald-800' : 'text-slate-500'}`}>{formData.hasPaid ? 'Â∑≤‰ªòÊ¨æ' : 'Â∞öÊú™‰ªòÊ¨æ'}</span>
                                </div>
                                {formData.hasPaid && <Icons.Check size={20} className="text-emerald-500"/>}
                            </div>
                            <div className="bg-purple-50 p-3 rounded-xl border border-purple-100">
                                <label className="text-sm font-bold text-purple-900 flex items-center gap-1 mb-2">
                                    <Icons.Sparkles size={14}/> ÊòéÂπ¥È°òÊôØ
                                </label>
                                <textarea className="w-full p-2 bg-white/80 border border-purple-200 rounded-lg text-sm outline-none resize-none h-20" placeholder="‰æãÂ¶ÇÔºöÊ∏õËÇ•ÊàêÂäü„ÄÅÂçáÂÆòÁôºË≤°..." value={formData.vision} onChange={e => setFormData({...formData, vision: e.target.value})} />
                            </div>
                            <div>
                                <label className="block text-sm font-bold text-slate-700 mb-1">ÂÇôË®ª</label>
                                <textarea className="w-full p-3 bg-slate-50 border rounded-xl outline-none focus:border-indigo-500 h-24 resize-none" placeholder="Ë®òÈåÑÈ£≤È£üÁ¶ÅÂøå„ÄÅÊòØÂê¶Êîú‰º¥..." value={formData.remarks} onChange={e => setFormData({...formData, remarks: e.target.value})} />
                            </div>
                            <div className="flex gap-3 pt-2">
                                {modalMode === 'edit' && (
                                    <button onClick={deleteAttendee} className="px-4 py-3 border border-red-200 text-red-500 rounded-xl font-bold">
                                        <Icons.Trash2 size={20} />
                                    </button>
                                )}
                                <button onClick={saveAttendee} className="flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg">ÂÑ≤Â≠ò</button>
                            </div>
                        </div>
                    </Modal>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
